{
  "comments": [
    {
      "key": {
        "uuid": "aef5673e_74ff8463",
        "filename": "lib/WikibaseLib.hooks.php",
        "patchSetId": 2
      },
      "lineNbr": 160,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "wikibase.datamodel, wb.store.FetchedContent, dataValues.values and mediawiki.Title dependencies.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_b434ec47",
        "filename": "lib/WikibaseLib.hooks.php",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "mw.Title dependency.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_147b98ec",
        "filename": "lib/resources/Resources.php",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Dependency for $.evalJSON and mw.Title.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_54d7e0c4",
        "filename": "lib/resources/jquery.valueview.experts.wikibase/experts.wikibase.EntityIdValue.js",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Please add the new parameter to the function documentation.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_315fce46",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.claimgrouplistview.js",
        "patchSetId": 2
      },
      "lineNbr": 51,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Option should be documented and added to the options object above (same for other files the option is introduced).",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_f158465b",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.claimgrouplistview.js",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Why not use self.option( \u0027entityStore\u0027 )? (same for other files the option is introduced)",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_db80af4d",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.claimgrouplistview.js",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 1366
      },
      "writtenOn": "2014-01-20T10:51:06Z",
      "side": 1,
      "message": "I just used _entityStore as a shortcut; I don\u0027t really care about either way.",
      "parentUuid": "aef5673e_f158465b",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_115cca4d",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.claimgrouplistview.js",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Documentation needs update.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_3f61c8d0",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.snakview/snakview.js",
        "patchSetId": 2
      },
      "lineNbr": 219,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T08:59:48Z",
      "side": 1,
      "message": "Please don\u0027t use \"then\", just use \"done\", \"fail\" and \"progress\". They are more expressive when reading the code and are used throughout the codebase already.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_91e45aa5",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.snakview/snakview.js",
        "patchSetId": 2
      },
      "lineNbr": 717,
      "author": {
        "id": 106
      },
      "writtenOn": "2014-01-15T11:41:44Z",
      "side": 1,
      "message": "yet another layer of indenting has been added, it would be great to try and split this large method up into a few smaller ones!",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_fbf25302",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.snakview/snakview.js",
        "patchSetId": 2
      },
      "lineNbr": 717,
      "author": {
        "id": 1366
      },
      "writtenOn": "2014-01-20T10:51:06Z",
      "side": 1,
      "message": "I\u0027ll address this in a different change in order to keep this one at least somewhat manageable, ok?",
      "parentUuid": "aef5673e_91e45aa5",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_71e9d67a",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.snakview/snakview.variations.Value.js",
        "patchSetId": 2
      },
      "lineNbr": 113,
      "author": {
        "id": 106
      },
      "writtenOn": "2014-01-15T11:41:44Z",
      "side": 1,
      "message": "again lots more indenting!",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_748b0421",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.snakview/snakview.variations.Value.js",
        "patchSetId": 2
      },
      "lineNbr": 113,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Agree. Some functionality should probably be factored out into separate functions.",
      "parentUuid": "aef5673e_71e9d67a",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_f476f438",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.snakview/snakview.variations.Value.js",
        "patchSetId": 2
      },
      "lineNbr": 295,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Please add some more comment why those line are necessary.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_d48bf019",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.snakview/snakview.variations.Variation.js",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Please document new parameter above.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_f4a5d49b",
        "filename": "lib/resources/jquery.wikibase/jquery.wikibase.snakview/snakview.variations.Variation.js",
        "patchSetId": 2
      },
      "lineNbr": 39,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Please add the attribute to the prototype extension below.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_84b76d81",
        "filename": "lib/resources/wikibase.seedEntityStoreFromMwConfig.js",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T08:42:03Z",
      "side": 1,
      "message": "Missing documentation for \"entityStore\" parameter",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_743e6428",
        "filename": "lib/resources/wikibase.seedEntityStoreFromMwConfig.js",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "\"seed\" does not seem to be the perfect expression. Probably, something like \"feedEntityStoreFromMwConfig\" or \"parseMwConfigToEntityStore\" would be a better choice.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_c4bd7565",
        "filename": "lib/resources/wikibase.seedEntityStoreFromMwConfig.js",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T08:42:03Z",
      "side": 1,
      "message": "This construct seems overly complex. The function does not get publicly exposed and you are just calling it to build a function which will return the same value over and over (the unserialize function).\nSo why not just build that unserialize function and put it in a local \"unserialize\" variable and get rid of two or three levels of indentation here.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_5b513fdc",
        "filename": "lib/resources/wikibase.seedEntityStoreFromMwConfig.js",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1366
      },
      "writtenOn": "2014-01-20T10:51:06Z",
      "side": 1,
      "message": "The current approach reduces load in case this module is required but not used. I think that\u0027s a reasonable goal considering our performance issues. We might even extend this to only construct the unserializer if the mwConfig actually contains entities.",
      "parentUuid": "aef5673e_c4bd7565",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_64ac6933",
        "filename": "lib/resources/wikibase.seedEntityStoreFromMwConfig.js",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T08:42:03Z",
      "side": 1,
      "message": "I would prefer if you would inject the MW config as a parameter. This way the function is properly designed for clean testing since you can just create a fake MW config instance and inject it here rather than using evil globals in your test and code.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_3b4e7b3d",
        "filename": "lib/resources/wikibase.seedEntityStoreFromMwConfig.js",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1366
      },
      "writtenOn": "2014-01-20T10:51:06Z",
      "side": 1,
      "message": "I copied that code from your change and did not spend too much time thinking about the scope of this module. Anyway, what exactly would you pass? The config var name, the mwConfig object or the actual config value?",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_3f3308f5",
        "filename": "lib/resources/wikibase.store/store.EntityStore.js",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T08:42:03Z",
      "side": 1,
      "message": "Looks like a step into the right direction.\n\nThough, at least in widgets I would prefer the term \"entityLookup\" instead of \"entityStore\".\nIn the places the object is used, it currently is and should only be used as a lookup.\nThe new store constructor should basically explicitly implement a lookup interface.\nDepending on where you want to go with this, you might also want to rename this to \"Lookup\" rather than \"Store\".\n\nKeep in mind that in the *view widgets you are dealing with two things:\n1. LOOKUP for displaying other entities information such as links to a property or the label of an entity used in a property-value snak.\n2. You want to STORE information about parts of an entity, basically the part your *view widget is dedicated to.\n\nThe two are not necessarily related. There should not be a \"master\" class/option to handle both cases within the widgets.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_1fbde416",
        "filename": "lib/resources/wikibase.store/store.EntityStore.js",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T09:20:11Z",
      "side": 1,
      "message": "See Bug 56246 for details about (2) from above. Solving that bug should require a lot more thought than this one.",
      "parentUuid": "aef5673e_3f3308f5",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_d4d9b02d",
        "filename": "lib/resources/wikibase.store/store.EntityStore.js",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Please add @since tag to public functions.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_9f53341a",
        "filename": "lib/resources/wikibase.store/store.EntityStore.js",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T08:42:03Z",
      "side": 1,
      "message": "Please also document the resolve callback of the promise.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_bf4ef870",
        "filename": "lib/resources/wikibase.store/store.EntityStore.js",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T08:42:03Z",
      "side": 1,
      "message": "Some issues.\n1. As described below, this lookup should deal with Entity rather than FetchedContent.\n2. Entities given via mw.config should not be seeded into an instance directly, instead, use a cache which itself implements the same interface as the lookup using the cache.\nSo you can have an EntityFromFetchedEntitiesLookup, an EntityFromMwApiLookup and an EntityMixedLookupsLookup which is taking several lookup instances and checking each one of them one after the other.\nThere might be different approaches, the whole caching/mw.config thing might not be that trivial.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_bf003805",
        "filename": "lib/resources/wikibase.store/store.EntityStore.js",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T08:42:03Z",
      "side": 1,
      "message": "This lookup/store should not deal with FetchedContent but with Entity only.\nOne of the reasons you need the whole FetchedContent thing right now is that you need the title when generating links to entity pages in the widgets.\n\nAll of the widgets should preferrably not even know about mw.Title tough. Think about reusing the widgets on some other site which is replecating Wikidatas entities and displays them in a non-MW environment.\nSo what you could do is to define an interface for something like an EntityRefLookup and have a MW specific implementation of that injected into your widgets for creating the links to the entity pages.\nThis lookup will also require access to the FetchedEntities, so you could inject and share the same object with the EntityFromFetchedEntitiesLookup instance mentioned in the comment above.\n\nAn alternative would be to get rid of FetchedContent and instead separate the mw.config variable into something fed to the Entity lookup and another thing fed to the entity reference lookup.\nSooner or later you might also have to deal with revision IDs, so not sure about the best approach right now.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_144dd8e0",
        "filename": "lib/tests/qunit/jquery.wikibase/jquery.wikibase.snaklistview.tests.js",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Might deserve a short comment why the entity store needs to be filled.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_7415449c",
        "filename": "lib/tests/qunit/wikibase.store/store.EntityStore.tests.js",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 167
      },
      "writtenOn": "2014-01-15T16:48:35Z",
      "side": 1,
      "message": "Would be nice to have some vertical spacing adding some blank lines in that code block.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_bf8b9871",
        "filename": "lib/tests/qunit/wikibase.store/store.EntityStore.tests.js",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 174
      },
      "writtenOn": "2014-01-17T09:20:11Z",
      "side": 1,
      "message": "Do not use QUnit.expect, instead, give 2 as asyncTest() argument.",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aef5673e_9b6ea792",
        "filename": "lib/tests/qunit/wikibase.store/store.EntityStore.tests.js",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1366
      },
      "writtenOn": "2014-01-20T10:51:06Z",
      "side": 1,
      "message": "QUnit documentation (https://api.qunitjs.com/asyncTest/) says: »This method used to have an optional second argument called expected. This argument is deprecated and its usage will start throwing errors in 2.0.0. If you\u0027re using it, use expect() instead.«",
      "parentUuid": "aef5673e_bf8b9871",
      "revId": "cf70774106cb8155c711953076af8911f6bd6053",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}