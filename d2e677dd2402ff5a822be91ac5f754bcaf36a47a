{
  "comments": [
    {
      "key": {
        "uuid": "8e742343_148f9cd2",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 33
      },
      "writtenOn": "2017-06-23T13:07:22Z",
      "side": 1,
      "message": "shouldn\u0027t this be writeFullEntityIdColumn?",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_5429a499",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-06-23T13:23:19Z",
      "side": 1,
      "message": "I believe it shouldn\u0027t. My logic was: settings say read from full id column, that means 1) there should be data there for all rows, 2) I don\u0027t care about the old column, and I am even fine with dropping it.\nIf so, this script should make sure there actually is data for all rows before user starts to do anything else.\n\nwriteFullEntityIdColumn only means there is a column there, when writing term data, just put it to the new column (too).\n\nBut those flags are confusing and I have to think what they mean every time.",
      "parentUuid": "8e742343_148f9cd2",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_f72692b4",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 33
      },
      "writtenOn": "2017-06-23T14:04:29Z",
      "side": 1,
      "message": "what is the default setting?\n\nespecially if it\u0027s false, then i think someone would want to populate the column before enabling read mode",
      "parentUuid": "8e742343_5429a499",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_773aa2c2",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-06-23T14:06:35Z",
      "side": 1,
      "message": "that\u0027s good point. it is false by default now but it should actually be true (we want people to use full id column for \"vanilla\" installs). I wanted to change this default after this patch, but maybe this should happen immediately before it?",
      "parentUuid": "8e742343_f72692b4",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_b7fb2ade",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 33
      },
      "writtenOn": "2017-06-23T14:15:17Z",
      "side": 1,
      "message": "or maybe just always populate the column? it should have been added already (just above)",
      "parentUuid": "8e742343_773aa2c2",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_f7d8d281",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-06-23T14:18:20Z",
      "side": 1,
      "message": "That would be fine but I thought we might want to account for setups that have huge wb_terms tables or any other reason to not populate it all during update.php\n\nFor Wikidata schema is not updated using update.php, so this would not be a problem any way, but I thought maybe it makes sense for non-WMF case too.\n\nBut I have no strong opinion here, I\u0027d be fine to drop the condition and run it always?",
      "parentUuid": "8e742343_b7fb2ade",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_94b14c90",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 375,
      "author": {
        "id": 33
      },
      "writtenOn": "2017-06-23T13:07:22Z",
      "side": 1,
      "message": "think this should be split to it\u0027s own class and extend LoggedUpdateMaintenance",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_94470c7c",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 375,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-06-23T13:20:16Z",
      "side": 1,
      "message": "I\u0027ve almost done this but is there a reasonable way to just run a query like those in sql files included here from a separate class? I mean, I would probably end up running Database::query( \u0027MEGA UPDATE\u0027 ) in this script and not match more.\nSomehow it felt bad. Is it OK to do like that?",
      "parentUuid": "8e742343_94b14c90",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_b4b6c883",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 383,
      "author": {
        "id": 33
      },
      "writtenOn": "2017-06-23T13:07:22Z",
      "side": 1,
      "message": "if we use LoggedUpdateMaintenance, i don\u0027t think this is needed",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e742343_145c7c4d",
        "filename": "repo/includes/Store/Sql/DatabaseSchemaUpdater.php",
        "patchSetId": 1
      },
      "lineNbr": 383,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-06-23T13:20:16Z",
      "side": 1,
      "message": "It is also not super critical here I think. I\u0027ve added this to avoid running select when not necessary. But you\u0027re right, if this was separate class, selects will not be run any way.",
      "parentUuid": "8e742343_b4b6c883",
      "revId": "d2e677dd2402ff5a822be91ac5f754bcaf36a47a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}