{
  "comments": [
    {
      "key": {
        "uuid": "AAADZH//8YE\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 128
      },
      "writtenOn": "2012-11-20T11:27:18Z",
      "side": 1,
      "message": "Inverse logic? The check below should *not* be done if --force is given, right?",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8Xo\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 178
      },
      "writtenOn": "2012-11-20T11:38:28Z",
      "side": 1,
      "message": "A save must be lost.. ;/",
      "parentUuid": "AAADZH//8YE\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8X0\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 128
      },
      "writtenOn": "2012-11-20T11:27:18Z",
      "side": 1,
      "message": "Would be nice to factor this out into a utility class, so we don\u0027t have code duplication between this, pollForChanges, and whatever else we may need.",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8Xc\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 178
      },
      "writtenOn": "2012-11-20T11:38:28Z",
      "side": 1,
      "message": "Could be its the same in pollForChanges, but this is from core .. it was late! ;) Yeah it could be nice to factor this out. Perhaps put it in Utils...",
      "parentUuid": "AAADZH//8X0\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8XM\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 178
      },
      "writtenOn": "2012-11-20T11:41:47Z",
      "side": 1,
      "message": "Seems like it is pollForChanges.. To many windows upen last night,.. ;)",
      "parentUuid": "AAADZH//8Xc\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8UQ\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 172
      },
      "writtenOn": "2012-11-20T13:28:39Z",
      "side": 1,
      "message": "It\u0027s from pollForChanges! I recognize the comment :P",
      "parentUuid": "AAADZH//8XM\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8Xw\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 128
      },
      "writtenOn": "2012-11-20T11:27:18Z",
      "side": 1,
      "message": "SQL injection here, $numDays needs to be checked. \n\nCasting to int should do the trick, but we should then at least check that it\u0027s \u003e0. Otherwise, a simple typo can cause the table to be emptied  and all change records to be lost.",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8XY\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 178
      },
      "writtenOn": "2012-11-20T11:38:28Z",
      "side": 1,
      "message": "Already casted to int, line 46.",
      "parentUuid": "AAADZH//8Xw\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8W4\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 128
      },
      "writtenOn": "2012-11-20T11:47:00Z",
      "side": 1,
      "message": "Checking and escaping must be done inside the function that constructs the SQL statement. Trusting the function parameters to be safe is asking for trouble.",
      "parentUuid": "AAADZH//8XY\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8WU\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 178
      },
      "writtenOn": "2012-11-20T12:14:25Z",
      "side": 1,
      "message": "I can add it here if you think it increases security, but in my opinion dangerous vars should be laundered as soon as possible. The reason is that any var that is dirty will taint anything it comes in contact with, so late whitewashing does not make the overall code safe.",
      "parentUuid": "AAADZH//8W4\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8WA\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 86,
      "author": {
        "id": 128
      },
      "writtenOn": "2012-11-20T12:21:11Z",
      "side": 1,
      "message": "The Mantra is: validate as early as possible, escape as late as possible. Always do both. Escaping early actually makes code unsafe, brittle and confusing. \n\nSome code may assume some things to already be escaped, but not others. Double-escaping may happen, and escaping may be forgotten. \n\nSo, please: validate and sanitize early, but please ALWAYS escape and check when generating SQL statements, HTML output, command line calls, etc.\n\nFor an integer is\u0027t a bit redundant, escaping just means \"make sure that it really is an int\". For strings, there\u0027s an actual difference that is important to observe.\n\nAnyway: A function should not trust its input. Not for something critical like building SQL statements, anyway.",
      "parentUuid": "AAADZH//8WU\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8X4\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 128
      },
      "writtenOn": "2012-11-20T11:27:18Z",
      "side": 1,
      "message": "Same as in pollForChanges, right? I guess we could put this into Utils, or make MaintenanceUtils or some such.",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8XU\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 178
      },
      "writtenOn": "2012-11-20T11:38:28Z",
      "side": 1,
      "message": "Again, nope, but can move it to Utils.",
      "parentUuid": "AAADZH//8X4\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADZH//8Wo\u003d",
        "filename": "repo/maintenance/pruneChanges.php",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 128
      },
      "writtenOn": "2012-11-20T11:47:00Z",
      "side": 1,
      "message": "I\u0027m not even sure we need the PID dance here, this script may run a few minutes, but it\u0027s not persistent. The database should perform the appropriate locking, so no problem if the script runs twice.",
      "parentUuid": "AAADZH//8XU\u003d",
      "revId": "263bc27df12c2e5fbc2216d73cbc7a921c627361",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}