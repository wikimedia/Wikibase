{
  "comments": [
    {
      "key": {
        "uuid": "4ae76f80_f62ecdf5",
        "filename": "client/WikibaseClient.php",
        "patchSetId": 4
      },
      "lineNbr": 256,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "I\u0027m not happy to see the magic word being called \"SHORTDESC\", but the API module \"description\". It would be really awesome if this could be the same.",
      "range": {
        "startLine": 256,
        "startChar": 20,
        "endLine": 256,
        "endChar": 31
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "040346e1_25fe8a12",
        "filename": "client/WikibaseClient.php",
        "patchSetId": 4
      },
      "lineNbr": 256,
      "author": {
        "id": 389
      },
      "writtenOn": "2018-02-28T22:17:21Z",
      "side": 1,
      "message": "The specification for this task was the result of lots of negotiations so I\u0027d ask that discussions about changing editor-visible parts would happen in the task and involve @DannyH. (I\u0027d pick {{DESCRIPTION|...}} or even {{#description|...}} if it were me but I imagine the \"short\" part helps orient editors on how to use it.) \u0027shortdesc\u0027 as an API module name sounds less than helpful, and it is combining two description sources after all so I don\u0027t think it\u0027s confusing that it\u0027s not exactly named after one of them.",
      "parentUuid": "4ae76f80_f62ecdf5",
      "range": {
        "startLine": 256,
        "startChar": 20,
        "endLine": 256,
        "endChar": 31
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d24d1c34_5c6c50a1",
        "filename": "client/config/WikibaseClient.default.php",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "Is this the setting that disabled the magic word? If so, can we please make sure the names of the two somehow resemble each other? If the magic word is called \"SHORTDESC\", shouldn\u0027t this setting be called \"allowLocalShortDesc\" then?",
      "range": {
        "startLine": 34,
        "startChar": 8,
        "endLine": 34,
        "endChar": 24
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ed7d047_3265ec65",
        "filename": "client/i18n/en.json",
        "patchSetId": 4
      },
      "lineNbr": 39,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "\"… short description a.k.a. subtitle …\"",
      "range": {
        "startLine": 39,
        "startChar": 51,
        "endLine": 39,
        "endChar": 62
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "256624a3_3d9d6f79",
        "filename": "client/i18n/en.json",
        "patchSetId": 4
      },
      "lineNbr": 42,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "Please use \"{{WBREPONAME}}\" here.",
      "range": {
        "startLine": 42,
        "startChar": 104,
        "endLine": 42,
        "endChar": 112
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0dc9323d_557ce942",
        "filename": "client/includes/Api/Description.php",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "If this really is an issue, it should be turned into a Phabricator ticket and prioritized accordingly. Please do not hide such fundamental architectural questions in a comment. It will not do anything here but confuse everybody looking at this code later.\n\nPlease either add a specific ticket number here, or remove the comment entirely.",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 21,
        "endChar": 59
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2ee6d10_0004392e",
        "filename": "client/includes/Api/Description.php",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 389
      },
      "writtenOn": "2018-02-28T22:17:21Z",
      "side": 1,
      "message": "I don\u0027t have a strong opinion on this, I was asked in the previous review round to add the note.",
      "parentUuid": "0dc9323d_557ce942",
      "range": {
        "startLine": 20,
        "startChar": 3,
        "endLine": 21,
        "endChar": 59
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b43bea8b_331b621b",
        "filename": "client/includes/Api/Description.php",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "Personally I like it if these are the first two constructor parameters, just as in the base class. But this is more a matter of taste than anything, so feel free to ignore this comment if you disagree.",
      "range": {
        "startLine": 70,
        "startChar": 2,
        "endLine": 71,
        "endChar": 13
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3270a478_f1084606",
        "filename": "client/includes/Api/Description.php",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "I suspect this is intentional, but please note this implementation is not able to apply any language fallbacks. Personally I believe this is correct and what I would expected from such an API module.",
      "range": {
        "startLine": 137,
        "startChar": 41,
        "endLine": 137,
        "endChar": 78
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ce9fd58f_ac5a99c5",
        "filename": "client/includes/Api/Description.php",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 389
      },
      "writtenOn": "2018-02-28T22:17:21Z",
      "side": 1,
      "message": "Yeah, it\u0027s intentional. I think falling back to a close language could be interesting if MediaWiki understood that concept, but giving an English description when the client expects a Mandarin one is not helpful at all.",
      "parentUuid": "3270a478_f1084606",
      "range": {
        "startLine": 137,
        "startChar": 41,
        "endLine": 137,
        "endChar": 78
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6875ae6b_4214e556",
        "filename": "client/includes/Api/Description.php",
        "patchSetId": 4
      },
      "lineNbr": 177,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "This is a pretty significant side-effect that is not immediately visible from the method name \"addDescriptionsToResult\". Can you please try to make it more obvious, e.g. by renaming the method?",
      "range": {
        "startLine": 177,
        "startChar": 4,
        "endLine": 177,
        "endChar": 35
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dec51577_ece03208",
        "filename": "client/includes/Hooks/ParserFunctionRegistrant.php",
        "patchSetId": 4
      },
      "lineNbr": 47,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "Can you please move the new code into a new private method? The new magic word is significantly distinct and does not really qualify as a \"parser function\" because it does not return anything. It\u0027s just a magic word, more similar to {{DISPLAYTITLE:…}} than to an actual function.",
      "range": {
        "startLine": 47,
        "startChar": 18,
        "endLine": 47,
        "endChar": 41
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "983111a7_6e3a6ee4",
        "filename": "client/includes/Hooks/ParserFunctionRegistrant.php",
        "patchSetId": 4
      },
      "lineNbr": 47,
      "author": {
        "id": 389
      },
      "writtenOn": "2018-02-28T22:17:21Z",
      "side": 1,
      "message": "Technically anything that takes wikitext input is a parser function, but sure, will move it if you prefer that.",
      "parentUuid": "dec51577_ece03208",
      "range": {
        "startLine": 47,
        "startChar": 18,
        "endLine": 47,
        "endChar": 41
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ab5e3dd_92903bdf",
        "filename": "client/includes/Hooks/ShortDescHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "The one major problem I do have with the sanitation and invalidation in here is that is is only applied on descriptions provided via {{SHORTDESC:…}} but not on Wikidata descriptions. This creates the situation that a Wikidata description that is actually invalid according to the algorithm in here can not be changed.\n\nE.g. the Wikidata description is \"..\" (two dots). Users can not override this with \"{{SHORTDESC:...}}\" (three dots). This is inconsistent and hard to argue when the community starts asking \"Why?\" questions. Can we please either get rid of this, or apply it on both local and central descriptions?",
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d31a90fb_f142c469",
        "filename": "client/includes/Hooks/ShortDescHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 389
      },
      "writtenOn": "2018-02-28T22:17:21Z",
      "side": 1,
      "message": "Sanitization is basically a wikitext -\u003e plaintext transform. Wikidata descriptions are plaintext in the first place, they cannot be compared. The goal is not to prevent anything, just to filter out HTML that was probably put there unintentionally or without realizing that the field is plaintext.\n\nAs for the validation criteria, that was the result of some pretty complex negotiations between the enwiki community and various WMF departments (and the Wikidata team, I\u0027d expect). If you want to change it, please discuss that with @DannyH on the task.\n\nI guess the same filtering could be applied to the central description, but it would complicate the code and AFAIK Wikidata already prevents such descriptions via community norms, so it would be somewhat pointless.",
      "parentUuid": "1ab5e3dd_92903bdf",
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fd9cc6aa_27b1da8e",
        "filename": "client/includes/Hooks/ShortDescHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "What does this mean?",
      "range": {
        "startLine": 15,
        "startChar": 4,
        "endLine": 15,
        "endChar": 19
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "167078d6_1f591ff5",
        "filename": "client/includes/Hooks/ShortDescHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 389
      },
      "writtenOn": "2018-02-28T22:17:21Z",
      "side": 1,
      "message": "Mindless copying from NoLangLinkHandler :) Probably should say parser function callback.",
      "parentUuid": "fd9cc6aa_27b1da8e",
      "range": {
        "startLine": 15,
        "startChar": 4,
        "endLine": 15,
        "endChar": 19
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2b2e9fa_41f4b2bf",
        "filename": "client/includes/Hooks/ShortDescHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1453
      },
      "writtenOn": "2018-02-28T13:26:52Z",
      "side": 1,
      "message": "This \\s is redundant because \\p{z} already includes all whitespace characters.",
      "range": {
        "startLine": 44,
        "startChar": 26,
        "endLine": 44,
        "endChar": 28
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7fd759e_b5867adb",
        "filename": "client/includes/Hooks/ShortDescHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 389
      },
      "writtenOn": "2018-02-28T22:17:21Z",
      "side": 1,
      "message": "I felt it makes the regex easier to read (most people probably wouldn\u0027t know what exactly is included in the separator category). Can remove if you disagree.",
      "parentUuid": "f2b2e9fa_41f4b2bf",
      "range": {
        "startLine": 44,
        "startChar": 26,
        "endLine": 44,
        "endChar": 28
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f314a8a6_c329a6ef",
        "filename": "client/includes/Hooks/ShortDescHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 389
      },
      "writtenOn": "2018-03-02T03:07:38Z",
      "side": 1,
      "message": "On a closer look, tab is apparently not included.",
      "parentUuid": "d7fd759e_b5867adb",
      "range": {
        "startLine": 44,
        "startChar": 26,
        "endLine": 44,
        "endChar": 28
      },
      "revId": "5c0e97f119abe87da493b738b552a743a02cf134",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}