{
  "comments": [
    {
      "key": {
        "uuid": "0ebaf39b_15b473ce",
        "filename": "repo/includes/Hooks/BuildDocumentParseHookHandler.php",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-11-30T18:32:32Z",
      "side": 1,
      "message": "I would prefer to group hook handers by their intent, and name the handler classes accordingly. I don\u0027t think having one class per hook is a good approach. Since the handler functions for the BuildDocumentParse and the MappingConfigHookHandler hooks share crucial knowledge (namely, what the extra fields are called and how they are structured), they should be handled by the same class. The fact that they both rely on the same information (a WikibaseFieldsDefinition object) is another strong indicator for this.",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_ebde9b42",
        "filename": "repo/includes/Hooks/BuildDocumentParseHookHandler.php",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 33
      },
      "writtenOn": "2015-12-01T13:17:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0ebaf39b_15b473ce",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_35e097c7",
        "filename": "repo/includes/Hooks/BuildDocumentParseHookHandler.php",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-11-30T18:32:32Z",
      "side": 1,
      "message": "Should the WikibaseFieldsDefinition perhaps come from WikibaseRepo? It\u0027S all hard coded now, but it may well depend on configuration...",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_cbe957e2",
        "filename": "repo/includes/Hooks/BuildDocumentParseHookHandler.php",
        "patchSetId": 2
      },
      "lineNbr": 50,
      "author": {
        "id": 33
      },
      "writtenOn": "2015-12-01T13:17:07Z",
      "side": 1,
      "message": "when it gets more complex, then sure.\n\nfor labels, it will take WikibaseContentLanguages but then that has not dependencies and is still rather simple to construct.",
      "parentUuid": "0ebaf39b_35e097c7",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_95ce235e",
        "filename": "repo/includes/Hooks/BuildDocumentParseHookHandler.php",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-11-30T18:32:32Z",
      "side": 1,
      "message": "Looks like the \"field definition\" is really a data mapper",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_55bd0bad",
        "filename": "repo/includes/Hooks/MappingConfigHookHandler.php",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-11-30T18:32:32Z",
      "side": 1,
      "message": "Please merge with BuildDocumentParseHookHandler (see comment there).",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_8befdfe3",
        "filename": "repo/includes/Hooks/MappingConfigHookHandler.php",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 33
      },
      "writtenOn": "2015-12-01T13:17:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0ebaf39b_55bd0bad",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_d5f7bb88",
        "filename": "repo/includes/Search/Fields/Field.php",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-11-30T18:32:32Z",
      "side": 1,
      "message": "Are the classes in this package specific to Cirrus/Elastic?",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_4bac879d",
        "filename": "repo/includes/Search/Fields/Field.php",
        "patchSetId": 2
      },
      "lineNbr": 3,
      "author": {
        "id": 33
      },
      "writtenOn": "2015-12-01T13:17:07Z",
      "side": 1,
      "message": "this is somewhat specific to elastic.\n\ni don\u0027t know where to put this code... i don\u0027t want it to really depend on repo and the cirrus parts also be optional dependency.\n\nthe necessary dependencies are data model (and in some places, elastica)",
      "parentUuid": "0ebaf39b_d5f7bb88",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_35073787",
        "filename": "repo/includes/Search/Fields/Field.php",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-11-30T18:32:32Z",
      "side": 1,
      "message": "This seems overly generic. IndexField or even SearchIndexField would be more informative.",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_75d12ffb",
        "filename": "repo/includes/Search/Fields/Field.php",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-11-30T18:32:32Z",
      "side": 1,
      "message": "How is this structured? What does it represent? Mapping of what to what? Is this specific to Elastic?\n\nAlso, it seems like this really returns a field declaration, not really a mapping, does it?",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ebaf39b_f5fc3f6f",
        "filename": "repo/includes/Search/Fields/Field.php",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-11-30T18:32:32Z",
      "side": 1,
      "message": "The important bit is that the actual data must match the declaration returned by getMapping, right?\n\nBtw, for symmetry, perhaps this method should be called mapData?",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ceb37bc7_cecc9769",
        "filename": "repo/includes/Search/Fields/Field.php",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 33
      },
      "writtenOn": "2015-12-03T14:51:57Z",
      "side": 1,
      "message": "maybe getFieldData and getMappingForField?\n\nthough think having \"Field\" in the method names is somewhat redundant to the interface / class names.\n\nMapping is a specific thing in ElasticSearch (it\u0027s the overall schema of the document)\n \nthen Cirrus has the concept of \"PageData\" and these are essentially page data fields. I think labels etc. are also page data.",
      "parentUuid": "0ebaf39b_f5fc3f6f",
      "revId": "e46166dc951a2fc66392d65671e64fc256c180d5",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}