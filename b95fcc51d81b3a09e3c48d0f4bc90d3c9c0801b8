{
  "comments": [
    {
      "key": {
        "uuid": "2ef897d1_7533860b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:51:03Z",
      "side": 1,
      "message": "this no longer reflects the name of the class introduced.\n\nWhile I am commenting on the commit message: it should probably also be mentioning this is actually moving (or actually copying) code from Api\\EditEntity.",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_7b5ed518",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T15:21:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ef897d1_7533860b",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_11ea2774",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 17,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T12:39:50Z",
      "side": 1,
      "message": "not true. It is implemented. My bad as I\u0027ve added this comment here. I just didn\u0027t read the code carefully enough.",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_1527b2b2",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:17:11Z",
      "side": 1,
      "message": "I wouldn\u0027t be surprised if it was me who suggested to put this class into this namespace. It is a validator after all...\nBut looking what at stuff is in this namespace it seems that it mostly (if not exclusively) code related to ValueValidators. This class has nothing to do with that if I am not mistaken, so maybe it would make more sense to have it in Wikibase\\Repo\\ChangeOpDeserializers/Deserialization? It seems it might fit better in there.",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_35918efc",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T13:52:56Z",
      "side": 1,
      "message": "Fair enough. In that case it might be nicer to rename the namespace to ChangeOpDeserialization?",
      "parentUuid": "2ef897d1_1527b2b2",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_182da741",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T14:14:14Z",
      "side": 1,
      "message": "I think so!",
      "parentUuid": "2ef897d1_35918efc",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_9819972a",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T15:21:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ef897d1_35918efc",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_515c1f4e",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 10,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:17:11Z",
      "side": 1,
      "message": "As per what I say in the comment in the public method of this class, I don\u0027t wonder it is difficult to describe what this class actually does :)\nBut especially because of that we should come up with some nice description, and link to change op serialization format docs.",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_f8e08bf9",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 26,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T14:14:14Z",
      "side": 1,
      "message": "I missed one remark: personally I\u0027d prefer ApiErrorReporter to be the last argument, as it is secondary to what the purpose of the class is. What do you think?",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_1b4ec172",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 26,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T15:21:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ef897d1_f8e08bf9",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_9533a2f3",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:17:11Z",
      "side": 1,
      "message": "I was wondering for quite a while what this whole class is actually about, and why this method does such weird things.\nThen I realized it basically extracting the code from Api\\EditEntity, basically unchanged. This is fine I believe, and in the bigger contexts the purpose of this class/method are clear.\n\nI am still not very happy about the name of the method (\"multilang\"?) Maybe it could be change to something along these lines:\nvalidateTermChangeOpData( $changeOpData, $languageOrIndex )\n\nNoooo, seeing this $languageOrIndex makes me cry. I hate naming things!\nI\u0027ll try to have another look on this and maybe I\u0027d be able to suggest better names.",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_354e2e9c",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T13:52:56Z",
      "side": 1,
      "message": "how about\nvalidateTermChangeRequestLanguage( $termChangeData, $langCode )\n\nI feel like \"language code\" still represents best what\u0027s behind the variable, especially with the type hint.",
      "parentUuid": "2ef897d1_9533a2f3",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_b81c5319",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T14:14:14Z",
      "side": 1,
      "message": "I agree, language code is OK. The intention of the int part should become more clear.\nMaybe it doesn\u0027t need to be reflected in the variable name. In doc block it could say if $langCode is an integer $arg array must contain a \u0027language\u0027 key with a term language code as value. Or something like this.",
      "parentUuid": "2ef897d1_354e2e9c",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_bb3d6dba",
        "filename": "repo/includes/Validators/TermChangeOpSerializationValidator.php",
        "patchSetId": 5
      },
      "lineNbr": 37,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T15:21:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ef897d1_b81c5319",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_71a95b21",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 11,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:17:11Z",
      "side": 1,
      "message": "class name changed",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_78f5bbb4",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 11,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T15:21:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ef897d1_71a95b21",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_b14c73a0",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 29,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:17:11Z",
      "side": 1,
      "message": "Those tests are really simple and small so it is not a big deal here but this is introducing a bit of clutter here.\n\nGenerally I\u0027d prefer to have two providers and two tests, one for case when the exception is thrown, and one for a \"positive\" case. That would remove the need to pass the false for \"good\" cases. It would also mean some code duplication though, but I\u0027d argue this is fine for tests. Putting too much stuff in providers make tests less easy to read IMO.\n\nBut in this case it might be just matter of taste in this case (small easy tests). So I am not opposing to having it like it is, just making a (lengthy) comment.\n\nOh wait, this validator does not return anything etc when it is all good. In this case positive tests would be doing no assertions.",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_f1954be7",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 59,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:17:11Z",
      "side": 1,
      "message": "So if I read docs/change-op-serialization right in most cases that would be the actual integer. I don\u0027t know why the old code has \"is_numeric\" there as if both 0 and \u00270\u0027 were allowed. I guess we must assume this is required. So maybe both cases should be covered by tests?",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_58f2ffce",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 59,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T15:21:46Z",
      "side": 1,
      "message": "Added a test for the int case!",
      "parentUuid": "2ef897d1_f1954be7",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_11b8e773",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 63,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:17:11Z",
      "side": 1,
      "message": "When \"remove\" key is present the value does not matter. Having true is correct. Then autogenerated API docs seem to be using \u0027remove\u0027 \u003d\u003e \u0027\u0027 in examples which is also quite common in Mediawiki API. Then Thiemo\u0027s documentation in docs/change-op-serialization uses \u0027remove\u0027: 1 as an example.\nThis is all not really critical but if I didn\u0027t know how to make a remove label change op and I looked in the tests, and then in docs I\u0027d be confused :)\nMaybe we should go for one convention in all three places mentioned here? E.g. \u0027remove\u0027: \u0027\u0027 (as this was there first one that has been there)? Again, this is nothing wrong with this test but I think it would be nice for clarity.",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_5882ff98",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 63,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T15:21:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2ef897d1_11b8e773",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_318c03db",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T13:17:11Z",
      "side": 1,
      "message": "this TODO is done now as it mocks ApiErrorReporter, isn\u0027t?",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_b80fb332",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T13:52:56Z",
      "side": 1,
      "message": "I\u0027m using this thing all over the place in the other patch as well and would prefer not to repeat it. Not sure whether it needs its own class or whether it\u0027s better to throw it into some test helper class. I\u0027m leaning towards the latter.",
      "parentUuid": "2ef897d1_318c03db",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_b8f573c9",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-27T14:14:14Z",
      "side": 1,
      "message": "Sorry, I was suggesting to remove the TODO but this is indeed something worth improving in the later patch, so TODO should stay!\nNot knowing all details from the further work it seems to me that having some class extending ApiErrorReporter so tests don\u0027t need ApiBase and all the stuff sound like a good idea. If this is what you meant by a \"test helper class\". Any other helper thing should be good here as well I think!",
      "parentUuid": "2ef897d1_b80fb332",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ef897d1_780a5b2b",
        "filename": "repo/tests/phpunit/includes/Validators/TermChangeOpSerializationValidatorTest.php",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1786
      },
      "writtenOn": "2017-01-27T15:21:46Z",
      "side": 1,
      "message": "Ah, what I meant by \"test helper class\" was a class that simply contains this exact method and can be used to share code between the ChangeOpDeserializer tests. I also intended to use this class for e.g. the containsChangeOp method from the ItemChangeOpDeserializerTest to be shared with PropertyChangeOpDeserializerTest. Not sure if that\u0027s a good practice though!",
      "parentUuid": "2ef897d1_b8f573c9",
      "revId": "b95fcc51d81b3a09e3c48d0f4bc90d3c9c0801b8",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}