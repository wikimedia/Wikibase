{
  "comments": [
    {
      "key": {
        "uuid": "8ec42329_a1fdc105",
        "filename": "repo/includes/rdf/RdfVocabulary.php",
        "patchSetId": 2
      },
      "lineNbr": 147,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-08-05T10:19:36Z",
      "side": 1,
      "message": "This is accessing globals state. Please do not do that if it can at all be avoided. If this class needs a map of canonical language names, it should require a map of canonical language names as a constructor parameter. This dependency should be explicit, and not buried in global state.\n\nAlso consider providing a LanguageCodeLookup interface instead of an array. That would be type safe, and it would allow lazy lookup/initialization.",
      "revId": "4ac76cc6f0f02ed22c292c0ee0675b2fc9e43824",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ec1af18_193e2588",
        "filename": "repo/includes/rdf/RdfVocabulary.php",
        "patchSetId": 2
      },
      "lineNbr": 147,
      "author": {
        "id": 2096
      },
      "writtenOn": "2015-08-18T23:43:42Z",
      "side": 1,
      "message": "I\u0027m not sure what you mean here. Why we need an interface if we just need a simple lookup table? It\u0027s just a simple config parameter, and this is what happens all over the code when you need to access config parameter (which yes, is a global state, that\u0027s what config parameters are). Do you want to pass the language names as parameter? I can do that though I don\u0027t see much value in it except just duplicating this code every time we instantiate the class, since this is what this config setting is supposed to do.",
      "parentUuid": "8ec42329_a1fdc105",
      "revId": "4ac76cc6f0f02ed22c292c0ee0675b2fc9e43824",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ec42329_40dd7316",
        "filename": "repo/includes/rdf/RdfVocabulary.php",
        "patchSetId": 2
      },
      "lineNbr": 242,
      "author": {
        "id": 562
      },
      "writtenOn": "2015-07-23T06:19:37Z",
      "side": 1,
      "message": "Why a special treatment for language codes with \"-\"? wfBCP47 makes just a strtolower().",
      "revId": "4ac76cc6f0f02ed22c292c0ee0675b2fc9e43824",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ec42329_eb23b850",
        "filename": "repo/includes/rdf/RdfVocabulary.php",
        "patchSetId": 2
      },
      "lineNbr": 242,
      "author": {
        "id": 2096
      },
      "writtenOn": "2015-08-03T19:52:46Z",
      "side": 1,
      "message": "To save a function call. This would be on a very frequently called codepath (each label in RDF dump passes through it, i.e. tens of millions of calls) and we know wfBCP47 won\u0027t do anything useful with languages that have no - inside.",
      "parentUuid": "8ec42329_40dd7316",
      "revId": "4ac76cc6f0f02ed22c292c0ee0675b2fc9e43824",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ec42329_9f5fce43",
        "filename": "repo/includes/rdf/RdfVocabulary.php",
        "patchSetId": 2
      },
      "lineNbr": 242,
      "author": {
        "id": 562
      },
      "writtenOn": "2015-08-04T04:29:01Z",
      "side": 1,
      "message": "You even decrease the performance for language codes which have a \u0027-\u0027 inside because you add a function call.\nIs this function a bottleneck? The performance can improved by caching.",
      "parentUuid": "8ec42329_eb23b850",
      "revId": "4ac76cc6f0f02ed22c292c0ee0675b2fc9e43824",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ec42329_035ce01c",
        "filename": "repo/includes/rdf/RdfVocabulary.php",
        "patchSetId": 2
      },
      "lineNbr": 242,
      "author": {
        "id": 2096
      },
      "writtenOn": "2015-08-04T19:47:05Z",
      "side": 1,
      "message": "Caching is a good idea, we don\u0027t have that many language codes. As for slowing down the ones with -, yes, it is a trade-off. Most labels however do not have - (most data is in languages like en, de, es, ru, zh, etc.) and only few labels have languages with -. So we optimize for the common case.",
      "parentUuid": "8ec42329_9f5fce43",
      "revId": "4ac76cc6f0f02ed22c292c0ee0675b2fc9e43824",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ec42329_c1000d06",
        "filename": "repo/includes/rdf/RdfVocabulary.php",
        "patchSetId": 2
      },
      "lineNbr": 242,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-08-05T10:19:36Z",
      "side": 1,
      "message": "Perhaps a local cache of mappings makes more sense then.",
      "parentUuid": "8ec42329_eb23b850",
      "revId": "4ac76cc6f0f02ed22c292c0ee0675b2fc9e43824",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}