{
  "comments": [
    {
      "key": {
        "uuid": "aea567c8_5291b59b",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "Why not use the one from the settings?",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_203024fc",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T22:38:15Z",
      "side": 1,
      "message": "I guess yes, we could use it at least as a default.",
      "parentUuid": "aea567c8_5291b59b",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_03a532b1",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 79,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T23:27:06Z",
      "side": 1,
      "message": "on the second thought, we can\u0027t since there\u0027s no config defining the JSON file - there\u0027s only a config defining the unit storage object, which can be anything. JSON file is sent to it as a parameter.",
      "parentUuid": "6ea7efd1_203024fc",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_32fbd113",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "Should abort with a meaningfull error message if $endPoint is null here.\nAlso, it would be nice if this could be overwritten by a command line option. At least for testing.",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_c015004f",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 106,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T22:38:15Z",
      "side": 1,
      "message": "makes sense, will add.",
      "parentUuid": "aea567c8_32fbd113",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_5707671f",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "would be nicer to have a private getter for this with lazy initialization",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_83e1422c",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 110,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T23:27:06Z",
      "side": 1,
      "message": "You mean to call it each time SPARQL client is needed? I\u0027m not sure why, it\u0027s always the same and we need to initalize it once. I can make a method for it, but frankly since it\u0027s one like calling new, I don\u0027t see a point of making method out of it.",
      "parentUuid": "aea567c8_5707671f",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_b7cd9364",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 156,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "There may be millions of usages of that unit. What should be the hard limit? Can we support batching/paging?",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_03fbf212",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 156,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T22:38:15Z",
      "side": 1,
      "message": "sparql endpoint right now doesn\u0027t support it. We could implement it manually but I\u0027m not sure it worth it. I\u0027d suggest to cross that bridge when we come to it - that would probably require implementing paging in SPARQL client.",
      "parentUuid": "aea567c8_b7cd9364",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_639cf65f",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 156,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T23:27:06Z",
      "side": 1,
      "message": "btw, most popular unit now has 70825 usages. See units usage query in previous patch https://gerrit.wikimedia.org/r/#/c/298407/ I think we can handle this without paging results. We do page unit queries since querying 70k values in one query may be too much.",
      "parentUuid": "6ea7efd1_03fbf212",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_12d9ed83",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 159,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "Seems like $values can be null/false on error. This needs checking. Ideally, SprqlClient would check and throw an exception. It would in any case be cood to get some kind of hint as to why the query is failing.",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_a309de31",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 159,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T22:38:15Z",
      "side": 1,
      "message": "In many cases it\u0027s hard to know why unless you read the error message itself.",
      "parentUuid": "aea567c8_12d9ed83",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_77eeebb2",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 160,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "the structure of $value is obscure here. is it documented somewhere? Can we link to that doc here?",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_0322d2a2",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 160,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T22:38:15Z",
      "side": 1,
      "message": "the structure of value is the fields from the query projection.",
      "parentUuid": "aea567c8_77eeebb2",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_5721a7f5",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 199,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "$value should have an array type hint",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_23a6eea7",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 199,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T23:27:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aea567c8_5721a7f5",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_574ac7c9",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 210,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "I\u0027d suggest to make a public method in QuantityRdfBuilder that does what you need, and call it form here.",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_c352aa16",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 210,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T22:38:15Z",
      "side": 1,
      "message": "Instantiating  QuantityRdfBuilder requires array of dependencies that I definitely don\u0027t want to deal with in a maintenance script we\u0027d run once a couple of months. I tried to make it work with  QuantityRdfBuilder but it\u0027s just too much work for implementing a simple function.",
      "parentUuid": "aea567c8_574ac7c9",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_97272f0d",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 237,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "\"Process\" to do what?",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_43169af7",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 237,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T23:27:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aea567c8_97272f0d",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8eaa6398_9e099d32",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 253,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "$data appears to be null or false sometimes. Please implement proper error handling in SparqlClient.",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_633ab6c2",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 253,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T22:38:15Z",
      "side": 1,
      "message": "it should never be false or null here. Could you elaborate when it happens for you?",
      "parentUuid": "8eaa6398_9e099d32",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_1782ffcd",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 256,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "can you add a quick note what this string juggling is intended to do?",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_63963651",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 256,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T23:27:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aea567c8_1782ffcd",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_b236c1e2",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 286,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "no error handling?",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_c3abca6c",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 286,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T23:27:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aea567c8_b236c1e2",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea567c8_12a44d03",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 296,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-10-25T17:29:27Z",
      "side": 1,
      "message": "should either not take parameters, or be called newRdfVocabulary. It\u0027s a factory, not a getter",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ea7efd1_03d9b22c",
        "filename": "repo/maintenance/addUnitConversions.php",
        "patchSetId": 6
      },
      "lineNbr": 296,
      "author": {
        "id": 2096
      },
      "writtenOn": "2016-10-25T23:27:06Z",
      "side": 1,
      "message": "Done.\n\nNote that RdfWriterFactory has getWriter() which does receive parameters and create writers :)",
      "parentUuid": "aea567c8_12a44d03",
      "revId": "f75dc3c325800e26aedaa46d72371495333af403",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}