<?xml version="1.0"?>
<!--
	For now this is mostly a subset of MediaWiki core's rule set, see
	https://github.com/wikimedia/mediawiki-tools-codesniffer/blob/master/MediaWiki/ruleset.xml
-->
<ruleset name="MediaWiki">

	<rule ref="Generic.ControlStructures" />

	<rule ref="Generic.Files.ByteOrderMark" />
	<rule ref="Generic.Files.EndFileNewline" />
	<rule ref="Generic.Files.InlineHTML" />
	<rule ref="Generic.Files.LineEndings" />
	<rule ref="Generic.Files.LineLength">
		<properties>
			<!-- FIXME: Should be decreased to 100, preferably in steps of 10. -->
			<property name="lineLimit" value="170" />
			<property name="absoluteLineLimit" value="9999" />
		</properties>
	</rule>
	<rule ref="Generic.Files.OneInterfacePerFile" />
	<rule ref="Generic.Files.OneTraitPerFile" />

	<rule ref="Generic.Formatting.DisallowMultipleStatements" />

	<rule ref="Generic.Functions.FunctionCallArgumentSpacing" />
	<rule ref="Generic.Functions.OpeningFunctionBraceKernighanRitchie" />

	<rule ref="Generic.NamingConventions.ConstructorName" />

	<rule ref="Generic.PHP.CharacterBeforePHPOpeningTag" />
	<rule ref="Generic.PHP.DeprecatedFunctions" />
	<rule ref="Generic.PHP.DisallowShortOpenTag" />
	<rule ref="Generic.PHP.ForbiddenFunctions" />
	<rule ref="Generic.PHP.NoSilencedErrors" />

	<rule ref="PSR1" />
	<rule ref="PSR1.Classes.ClassDeclaration.MissingNamespace">
		<severity>0</severity>
	</rule>
	<!-- FIXME: This indicates an error in the Wikibase codebase that should be fixed. -->
	<rule ref="PSR1.Classes.ClassDeclaration.MultipleClasses">
		<severity>0</severity>
	</rule>
	<rule ref="PSR1.Files.SideEffects.FoundWithSymbols">
		<severity>0</severity>
	</rule>
	<rule ref="PSR1.Methods.CamelCapsMethodName.NotCamelCaps">
		<severity>0</severity>
	</rule>

	<!-- TODO: Enable PSR2 sniffs. -->
	<rule ref="PSR2.ControlStructures.ElseIfDeclaration" />
	<rule ref="PSR2.Methods.MethodDeclaration" />

	<rule ref="Squiz.Classes.ValidClassName.NotCamelCaps">
		<!-- FIXME: This indicates an error in the Wikibase codebase that should be fixed. -->
		<exclude-pattern>DataAccess*Scribunto*Scribunto_LuaWikibase*Library</exclude-pattern>
	</rule>
	<rule ref="Squiz.ControlStructures.ControlSignature" />
	<!-- FIXME: This indicates an error in the Wikibase codebase that should be fixed. -->
	<rule ref="Squiz.ControlStructures.ControlSignature.NewlineAfterOpenBrace">
		<severity>0</severity>
	</rule>
	<rule ref="Squiz.ControlStructures.ControlSignature.SpaceAfterCloseBrace">
		<severity>0</severity>
	</rule>
	<!-- FIXME: This indicates an error in the Wikibase codebase that should be fixed. -->
	<rule ref="Squiz.ControlStructures.ControlSignature.SpaceAfterKeyword">
		<severity>0</severity>
	</rule>
	<rule ref="Squiz.WhiteSpace.FunctionSpacing">
		<properties>
			<property name="spacing" value="1" />
		</properties>
	</rule>
	<!-- FIXME: This indicates an error in the Wikibase codebase that should be fixed. -->
	<rule ref="Squiz.WhiteSpace.FunctionSpacing.After">
		<severity>0</severity>
	</rule>
	<rule ref="Squiz.WhiteSpace.LogicalOperatorSpacing" />
	<rule ref="Squiz.WhiteSpace.ScopeClosingBrace" />
	<rule ref="Squiz.WhiteSpace.SemicolonSpacing" />
	<rule ref="Squiz.WhiteSpace.SuperfluousWhitespace" />

	<rule ref="Zend.Files.ClosingTag" />
</ruleset>
