{
  "comments": [
    {
      "key": {
        "uuid": "c1c4f383_abdf9ef8",
        "filename": "repo/includes/Dumpers/JsonDumpGenerator.php",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 2096
      },
      "writtenOn": "2019-04-02T19:00:15Z",
      "side": 1,
      "message": "Not a big fan of this name - what \"last\" would mean here? It certainly can\u0027t guarantee this revision is actually the last one when I am reading the dump. And since we don\u0027t have any other revision IDs, it\u0027s in fact the only revision ID, so not clear why it\u0027s \"last\". I\u0027d just name it \"revid\".",
      "range": {
        "startLine": 144,
        "startChar": 13,
        "endLine": 144,
        "endChar": 22
      },
      "revId": "d50969aa62d0c9e88b37d9ebb9b0684daf7b263b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "385f9094_1c23373b",
        "filename": "repo/includes/Dumpers/JsonDumpGenerator.php",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 5361
      },
      "writtenOn": "2019-04-02T19:08:57Z",
      "side": 1,
      "message": "I am not a big fan of the \"last\" either but it has the merit of being consistent with the output of the API (Special:EntityData, action\u003dwbgetentities both use this name). This means that consumers will be able to use the same deserialization code for both sources.",
      "parentUuid": "c1c4f383_abdf9ef8",
      "range": {
        "startLine": 144,
        "startChar": 13,
        "endLine": 144,
        "endChar": 22
      },
      "revId": "d50969aa62d0c9e88b37d9ebb9b0684daf7b263b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b0238af_7c38aa25",
        "filename": "repo/includes/Dumpers/JsonDumpGenerator.php",
        "patchSetId": 1
      },
      "lineNbr": 144,
      "author": {
        "id": 4699
      },
      "writtenOn": "2019-04-09T12:58:20Z",
      "side": 1,
      "message": "I think in Special:EntityData the name lastrevid is actually much worse, since that page lets you specify older revision IDs (?oldid\u003d or ?revision\u003d) and we’ll still call those “last” in the output. Might be a breaking change to consider in the future? But for the time being I think it makes sense to use the name “lastrevid” here, for consistency, and then we can update both later.",
      "parentUuid": "385f9094_1c23373b",
      "range": {
        "startLine": 144,
        "startChar": 13,
        "endLine": 144,
        "endChar": 22
      },
      "revId": "d50969aa62d0c9e88b37d9ebb9b0684daf7b263b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "704ecac8_6fcfd825",
        "filename": "repo/includes/Dumpers/JsonDumpGenerator.php",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 4699
      },
      "writtenOn": "2019-04-09T12:58:20Z",
      "side": 1,
      "message": "I wonder if it would make sense to add some kind of call like\n\n $data \u003d $this-\u003einjectEntitySerializationWithMetadata( $revision );\n\nhere, instead of the array_merge() below?",
      "revId": "d50969aa62d0c9e88b37d9ebb9b0684daf7b263b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c4c8542_443f6727",
        "filename": "repo/includes/Dumpers/JsonDumpGenerator.php",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 5361
      },
      "writtenOn": "2019-04-09T13:11:45Z",
      "side": 1,
      "message": "Wouldn\u0027t the `injectEntitySerializationWithMetadata` method also need to take $data as an argument?\n\nI don\u0027t know much about PHP so I just followed the same approach as in the API, where array_merge is used too. Maybe there is a way to refactor both then?",
      "parentUuid": "704ecac8_6fcfd825",
      "revId": "d50969aa62d0c9e88b37d9ebb9b0684daf7b263b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "70200eac_ac7212ce",
        "filename": "repo/includes/Dumpers/JsonDumpGenerator.php",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 4699
      },
      "writtenOn": "2019-04-09T13:32:55Z",
      "side": 1,
      "message": "Right, I forgot the $data argument. (I think $data, $revision would make more sense than $revision, $data, but I’m not sure.)\n\nThe implementation of the new function could still use array_merge(), but it could also directly set $data[\u0027lastrevid\u0027]. (I’m not sure why ResultBuilder uses array_merge(), to be honest.)",
      "parentUuid": "0c4c8542_443f6727",
      "revId": "d50969aa62d0c9e88b37d9ebb9b0684daf7b263b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf573198_79e243b7",
        "filename": "repo/includes/Dumpers/JsonDumpGenerator.php",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 5361
      },
      "writtenOn": "2019-04-09T13:36:25Z",
      "side": 1,
      "message": "I suspect it could be used to make sure `lastrevid` appears first in the serialized output? Or is there a way to set $data[\u0027lastrevid\u0027] and make sure it is prepended to the rest, not appended?",
      "parentUuid": "70200eac_ac7212ce",
      "revId": "d50969aa62d0c9e88b37d9ebb9b0684daf7b263b",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    }
  ]
}