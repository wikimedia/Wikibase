{
  "comments": [
    {
      "key": {
        "uuid": "4efb0bce_59530844",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 84,
      "author": {
        "id": 4089
      },
      "writtenOn": "2017-01-18T18:47:45Z",
      "side": 1,
      "message": "I know that we don\u0027t have this convention, but to me it feels strange to see implementation details before actual tests. I would really appreciate if you move it down after the tests.",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 84,
        "endChar": 2
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_c02138ae",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 84,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-01-19T01:00:46Z",
      "side": 1,
      "message": "I guess it\u0027s a matter of taste. To me, it\u0027s more intuitive to have the scaffolding at the top, and the meat at the bottom.",
      "parentUuid": "4efb0bce_59530844",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 84,
        "endChar": 2
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_667171dd",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 84,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-20T16:06:25Z",
      "side": 1,
      "message": "I cannot satisfy both preferred orders :)\nMy personal intuition seems to be more similar to Daniel\u0027s. I wouldn\u0027t oppose if convention Aleksey is referring too was introduced, though.",
      "parentUuid": "4efb0bce_c02138ae",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 84,
        "endChar": 2
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_b9a67c4e",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 4089
      },
      "writtenOn": "2017-01-18T18:47:45Z",
      "side": 1,
      "message": "Can we enable client in test so it will always run correctly?",
      "range": {
        "startLine": 87,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_a0163c58",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-01-19T01:00:46Z",
      "side": 1,
      "message": "No, we want to be able to test with and without client enabled.",
      "parentUuid": "4efb0bce_b9a67c4e",
      "range": {
        "startLine": 87,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_aeef4d81",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 4089
      },
      "writtenOn": "2017-01-19T11:02:33Z",
      "side": 1,
      "message": "Then can we have two tests: one with client enabled and another with client disabled?",
      "parentUuid": "4efb0bce_a0163c58",
      "range": {
        "startLine": 87,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_f46512ab",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 106
      },
      "writtenOn": "2017-01-19T16:36:47Z",
      "side": 1,
      "message": "Yes, although the tests may have to be in different classes / files with different @groups annotations",
      "parentUuid": "4efb0bce_aeef4d81",
      "range": {
        "startLine": 87,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_4e8699bf",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 89,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-20T07:28:07Z",
      "side": 1,
      "message": "Well this is actually the case, in a way. Those tests are supposed to be only run when Client is enabled, otherwise there is nothing to test. The behaviour in a setup with no Client enabled is correct IMO - tests are skipped with the message explaining why they\u0027re skipped.\n\nI am going to move the check to setUp so it is more evident, and to rename the test class slightly. Current class name is a left over from the time I was fiddling to get it all together, and is not really meaningful.",
      "parentUuid": "4efb0bce_aeef4d81",
      "range": {
        "startLine": 87,
        "startChar": 0,
        "endLine": 89,
        "endChar": 3
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_d97818c2",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 118,
      "author": {
        "id": 4089
      },
      "writtenOn": "2017-01-18T18:47:45Z",
      "side": 1,
      "message": "Setup is complicated, I can\u0027t really say what is important and what is not. Can it be simplified? May be some unimportant details can be hidden behind method calls?",
      "range": {
        "startLine": 91,
        "startChar": 2,
        "endLine": 118,
        "endChar": 6
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4efb0bce_26113960",
        "filename": "repo/tests/phpunit/includes/WikibaseRepoIntegrationTest.php",
        "patchSetId": 13
      },
      "lineNbr": 118,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-01-20T16:06:25Z",
      "side": 1,
      "message": "I am very glad you\u0027ve commented on this. Thanks.\n\nSetup is indeed big and messy. The main reason is that what I do here faking performing SQL selects that are joins on multiple tables.\nI managed to remove some bits here and there, and have tests still pass. Hopefully that makes it easier to get the idea what the particular test is about. It\u0027s still not perfect though.\n\nI am not at all convinced this is the best/right (tm) way of performing such tests. On the other hand, the other option would be to create \"real\" entities and store them in test DB using Wikibase services etc. I imagine that would make test setup far more complex (as there are completely different kinds of services touching different aspects of entities, thus requiring different kind of test setup).\n\nI\u0027ve moved those tests to separate patch: Ia2361ae56ab5222c71f14f69a0f591e198363b97 (which also includes similar tests for Client component). I believe such tests do not really belong here. On the other hand I also believe we want to have it tested somehow.\n\nThat other patch is mostly to verify that all services we\u0027ve creating and adjusting work as intended if there is expected data in the expected DB. They\u0027re far from nice and clean tests, and they should not be considered as such.\nI\u0027d very much like to discuss how and where we would like to have the whole \"federation\" functionality tested.",
      "parentUuid": "4efb0bce_d97818c2",
      "range": {
        "startLine": 91,
        "startChar": 2,
        "endLine": 118,
        "endChar": 6
      },
      "revId": "7f8f7fdc9916780bd218529749e9ffa02e992aee",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}