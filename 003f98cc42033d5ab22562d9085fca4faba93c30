{
  "comments": [
    {
      "key": {
        "uuid": "aea727be_6ffcd1d6",
        "filename": "repo/includes/Store/Sql/EntityPerPageTable.php",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1453
      },
      "writtenOn": "2016-08-15T15:41:39Z",
      "side": 1,
      "message": "This was introduced in Ie2d4758. While reviewing said patch I expected the \"wb_entity_per_page\" table to have a unique key including all three \"epp_entity_id\", \"epp_entity_type\" and \"epp_page_id\" columns, but my local installation does not have such a key. Why not?",
      "revId": "003f98cc42033d5ab22562d9085fca4faba93c30",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aea727be_8ff495cd",
        "filename": "repo/includes/Store/Sql/EntityPerPageTable.php",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 50
      },
      "writtenOn": "2016-08-15T15:47:05Z",
      "side": 1,
      "message": "We have two unique indices on this table:\n\nCREATE UNIQUE INDEX /*i*/wb_epp_entity ON /*_*/wb_entity_per_page (epp_entity_id, epp_entity_type);\nCREATE UNIQUE INDEX /*i*/wb_epp_page ON /*_*/wb_entity_per_page (epp_page_id);\n\nThat\u0027s more useful and restrictive than one large one, as we can only have one entity per page id.",
      "parentUuid": "aea727be_6ffcd1d6",
      "revId": "003f98cc42033d5ab22562d9085fca4faba93c30",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e89af39_d92586be",
        "filename": "repo/includes/Store/Sql/EntityPerPageTable.php",
        "patchSetId": 3
      },
      "lineNbr": 135,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-08-17T10:53:42Z",
      "side": 1,
      "message": "why is this even needed? when does this happen?",
      "revId": "003f98cc42033d5ab22562d9085fca4faba93c30",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e89af39_b90fda3a",
        "filename": "repo/includes/Store/Sql/EntityPerPageTable.php",
        "patchSetId": 3
      },
      "lineNbr": 143,
      "author": {
        "id": 128
      },
      "writtenOn": "2016-08-17T10:54:53Z",
      "side": 1,
      "message": "May still fail due to a race condition, if this isn\u0027t run in a transaction. Oh, well.",
      "revId": "003f98cc42033d5ab22562d9085fca4faba93c30",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}