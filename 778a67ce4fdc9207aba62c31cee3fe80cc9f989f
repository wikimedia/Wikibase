{
  "comments": [
    {
      "key": {
        "uuid": "9e5087ce_ff14a178",
        "filename": "lib/includes/Store/Sql/WikiPageEntityMetaDataAccessor.php",
        "patchSetId": 5
      },
      "lineNbr": 29,
      "author": {
        "id": 128
      },
      "writtenOn": "2018-06-29T11:08:54Z",
      "side": 1,
      "message": "Ideally, we\u0027d change this from returning stdClass to returning a RevisionRecord.\n\nWith the old Revision class, this was not possible because Revision is bound to the local wiki, and this needs to support cross-wiki lookups.",
      "revId": "778a67ce4fdc9207aba62c31cee3fe80cc9f989f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8dd32fb2_bb221242",
        "filename": "lib/includes/Store/Sql/WikiPageEntityMetaDataLookup.php",
        "patchSetId": 5
      },
      "lineNbr": 208,
      "author": {
        "id": 128
      },
      "writtenOn": "2018-06-29T11:08:54Z",
      "side": 1,
      "message": "This method should probably go away and be replaced by a call to RevisionStore::getQueryInfo()",
      "revId": "778a67ce4fdc9207aba62c31cee3fe80cc9f989f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fb74dfc_ccbda0f2",
        "filename": "lib/includes/Store/Sql/WikiPageEntityMetaDataLookup.php",
        "patchSetId": 5
      },
      "lineNbr": 235,
      "author": {
        "id": 128
      },
      "writtenOn": "2018-06-29T11:08:54Z",
      "side": 1,
      "message": "Ideally, all direct database access would go away. This was only really needed to support cross-wiki lookups. RevisionStore supports that, so we should use it.\n\nAt the very least, this should make use of getQueryInfo(), and probably also use newRevisionrecordFromRow.",
      "revId": "778a67ce4fdc9207aba62c31cee3fe80cc9f989f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1986856_95b315cf",
        "filename": "lib/includes/Store/Sql/WikiPageEntityRevisionLookup.php",
        "patchSetId": 5
      },
      "lineNbr": 185,
      "author": {
        "id": 106
      },
      "writtenOn": "2018-06-29T10:18:16Z",
      "side": 1,
      "message": "It doesn\u0027t look like this will cause issues, but to make this less evil I have to change the contract of EntityRevisionLookup::getEntityRevision to state that null can mean access to a revision is forbidden as it doesn\u0027t yet state that.\n\nDo we have some exception that could be better thrown here instead?",
      "range": {
        "startLine": 185,
        "startChar": 3,
        "endLine": 185,
        "endChar": 25
      },
      "revId": "778a67ce4fdc9207aba62c31cee3fe80cc9f989f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8873c911_be111fa7",
        "filename": "lib/includes/Store/Sql/WikiPageEntityRevisionLookup.php",
        "patchSetId": 5
      },
      "lineNbr": 185,
      "author": {
        "id": 128
      },
      "writtenOn": "2018-06-29T10:43:21Z",
      "side": 1,
      "message": "This WILL cause issues. It\u0027s probably ok-ish for now, but not nice at all, and there is no easy way to do this  right.\n\nFor now, this code needs a big fat WARNING pointing to https://phabricator.wikimedia.org/T198467",
      "parentUuid": "f1986856_95b315cf",
      "range": {
        "startLine": 185,
        "startChar": 3,
        "endLine": 185,
        "endChar": 25
      },
      "revId": "778a67ce4fdc9207aba62c31cee3fe80cc9f989f",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}