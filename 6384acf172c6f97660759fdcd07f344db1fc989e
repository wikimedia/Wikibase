{
  "comments": [
    {
      "key": {
        "uuid": "0e1cb3f9_872d8543",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-05-10T18:36:20Z",
      "side": 1,
      "message": "Please use setters instead of optional boolean parameters.",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_1931d500",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1cb3f9_872d8543",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_27e119fc",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 328,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-05-10T18:36:20Z",
      "side": 1,
      "message": "This check can and should be dropped if we read and write full IDs!",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_abfbac10",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 328,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Well, let\u0027s keep it for now. I think this should be removed when we are removing the whole feature flag.",
      "parentUuid": "0e1cb3f9_27e119fc",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_e7eb21da",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 334,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-05-10T18:36:20Z",
      "side": 1,
      "message": "This should use the full ID if possible (that is, if readFullEntityIdColumn is enabled).",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_ab33acbf",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 334,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1cb3f9_e7eb21da",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_006c0398",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 345,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-05-10T13:14:03Z",
      "side": 1,
      "message": "deleteTermsOfEntity has a flag check, shouldn\u0027t this too have a conditional to pick right column(s) to WHERE?",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_cb38609e",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 345,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1cb3f9_006c0398",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_00f3a3e4",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 420,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-05-10T13:14:03Z",
      "side": 1,
      "message": "shouldn\u0027t this check the other flag?\nI mean, write flag only means \"there is full id column, fill it when writing new data\". Even if the flag is on, there might be rows with the numeric column set only, in this case delete would skip them (which is wrong). Therefore I\u0027d rather check the other flag here, as it means \"there is data in full id column for all rows, so use it when reading term data\". Does it sounds about correct?",
      "range": {
        "startLine": 420,
        "startChar": 14,
        "endLine": 420,
        "endChar": 37
      },
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_27b839e2",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 420,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-05-10T18:36:20Z",
      "side": 1,
      "message": "Yes, \"read\" means \"use in where\" as well as \"use in select\". That includes deletion. \"write\" means \"set field on insert\".",
      "parentUuid": "0e1cb3f9_00f3a3e4",
      "range": {
        "startLine": 420,
        "startChar": 14,
        "endLine": 420,
        "endChar": 37
      },
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_cbd94085",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 420,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1cb3f9_27b839e2",
      "range": {
        "startLine": 420,
        "startChar": 14,
        "endLine": 420,
        "endChar": 37
      },
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_93d70ff2",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 424,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-05-10T13:14:03Z",
      "side": 1,
      "message": "Also I wonder whether the condition for the \"flag is on\" case shouldn\u0027t rather just check the full id? As in, flag is on, so we assume it is set for all rows, so we don\u0027t bother with the fallback to numeric id.",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_e7d2412c",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 424,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-05-10T18:36:20Z",
      "side": 1,
      "message": "Even more: if the read flag is on, the old fields may no longer exist in the database!",
      "parentUuid": "0e1cb3f9_93d70ff2",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_6bcef4ba",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 424,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1cb3f9_e7d2412c",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_a047574f",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 535,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-05-10T13:14:03Z",
      "side": 1,
      "message": "you might have wanted to use $id-\u003egetLocalPart() ?",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_ab864c68",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 535,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1cb3f9_a047574f",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_87bd8565",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 714,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-05-10T18:36:20Z",
      "side": 1,
      "message": "Please add a blank line here, to make the indent less confusing visually.",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_2bb47c32",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 714,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1cb3f9_87bd8565",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_f3f1ab93",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 875,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-05-10T13:14:03Z",
      "side": 1,
      "message": "Shouldn\u0027t this avoid to directly call EntityId::joinSerialization? Shouldn\u0027t the class assume the id parser injected in the constructor is configured so it would add the required prefix?\nIt might get tricky, I guess. Might need some further thought.",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_47768dd6",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 875,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-05-10T18:36:20Z",
      "side": 1,
      "message": "Hm... my inclination is to say that this should just parse $termRow-\u003eterm_full_entity_id, and not add the repo name, because the IdParser should have the correct knowledge about prefix mappings.\n\nThat\u0027S a bit confusing, because the EntityIdComposer does *not* have that knowledge, and needs the repo name to be passed in. Maybe that should be changed?...\n\nWe should take good care not to introduce the possibility of nasty inconsistencies here.",
      "parentUuid": "0e1cb3f9_f3f1ab93",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_6b53541b",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 875,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Without it, tests fail. Since it\u0027s a refactoring, I want to be careful not to change any tests. Probably this inconsistency is already there.",
      "parentUuid": "0e1cb3f9_47768dd6",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_4c1778a8",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 875,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-05-16T09:19:09Z",
      "side": 1,
      "message": "Please check PS10 for a change in the test that was missing but is critical if I am not mistaken.\n\nIt is true that the behaviour if this class is pretty inconsistent.\n1. When using full id, just parse and don\u0027t care as the class assumes the parser does right thing.\n2. When using numeric ID pass in repo name to the ID composer, so it does the right. Still, this class assumes the composer handles the repo name information correctly and adds the prefix. No extra check etc in this case, as in the case 1.\n\nSo maybe this inconsistency is not _that_ bad? I am still a bit concerned. Should this class do some sanity check? Or is \"assume and don\u0027t care\" an OK approach here?",
      "parentUuid": "0e1cb3f9_6b53541b",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_474d2d9a",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 984,
      "author": {
        "id": 128
      },
      "writtenOn": "2017-05-10T18:36:20Z",
      "side": 1,
      "message": "only needed when $this-\u003ereadFullEntityIdColumn is false",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_0b5c181c",
        "filename": "lib/includes/Store/Sql/TermSqlIndex.php",
        "patchSetId": 4
      },
      "lineNbr": 984,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1cb3f9_474d2d9a",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_60d4df4b",
        "filename": "lib/tests/phpunit/Store/Sql/TermSqlIndexTest.php",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-05-10T13:14:03Z",
      "side": 1,
      "message": "import not needed?",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_80d9f385",
        "filename": "lib/tests/phpunit/Store/Sql/TermSqlIndexTest.php",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 2626
      },
      "writtenOn": "2017-05-10T13:14:03Z",
      "side": 1,
      "message": "is it needed to change this for this test?",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e1cb3f9_4b453017",
        "filename": "lib/tests/phpunit/Store/Sql/TermSqlIndexTest.php",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 920
      },
      "writtenOn": "2017-05-11T21:10:58Z",
      "side": 1,
      "message": "IDK. Do you think it\u0027s bad to have it?",
      "parentUuid": "0e1cb3f9_80d9f385",
      "revId": "6384acf172c6f97660759fdcd07f344db1fc989e",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}