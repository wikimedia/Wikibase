{
  "comments": [
    {
      "key": {
        "uuid": "6e7c4fa4_4bdb0025",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 44
      },
      "writtenOn": "2015-02-22T01:34:10Z",
      "side": 1,
      "message": "Presentation | application / domain | data access\n\n\"Rendering for lua\" falls in the presentation part, not the data access one :)",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_f7d42eef",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T12:46:41Z",
      "side": 1,
      "message": "Indeed",
      "parentUuid": "6e7c4fa4_4bdb0025",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_faf5f34d",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 3,
      "author": {
        "id": 50
      },
      "writtenOn": "2015-02-23T16:15:07Z",
      "side": 1,
      "message": "That\u0027s a problem the whole namespace has...",
      "parentUuid": "6e7c4fa4_f7d42eef",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_d792524e",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 71,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T12:46:41Z",
      "side": 1,
      "message": "Passing the accumulator here means the renderer instance cannot be used for multiple entities. This doesn\u0027t feel right for a service. I\u0027d prefer for the accumulator to be an (optional) argument to the relevant methods. Or even leave it to the caller to also invoke trackUsage().",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_baba1b6b",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 71,
      "author": {
        "id": 50
      },
      "writtenOn": "2015-02-23T16:15:07Z",
      "side": 1,
      "message": "Yeah, will do that",
      "parentUuid": "6e7c4fa4_d792524e",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_97893a29",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T12:46:41Z",
      "side": 1,
      "message": "Looking up the entity should not be the responsibility of a renderer. Maybe if we look at this as an interactor (user input -\u003e user output) it does make sense. In that case, I recommend to rename the class.\n\nHowever, there should be a way to control how missing entities are handled. Just returning an empty string seems problematic to me.",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_9ab5df7a",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 50
      },
      "writtenOn": "2015-02-23T16:15:07Z",
      "side": 1,
      "message": "EntityStatementsRenderInteractor (or something along these lines) will fit better",
      "parentUuid": "6e7c4fa4_97893a29",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_204c9a42",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T18:05:46Z",
      "side": 1,
      "message": "Better, but clunky. Thinking about it, it seems like what this thing does is implement a transclusion mechanism. It transcludes data values on a wikipage, tracks usage, and handled errors. StatementTransclusionInteractor? StatementTranscluder?",
      "parentUuid": "6e7c4fa4_9ab5df7a",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_17a44a9d",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T12:46:41Z",
      "side": 1,
      "message": "Again, it feels odd to make the *renderer* responsible for the lookup. The name and class-level description does not imply this. Can\u0027t think of a better term than \"interactor\" right now...",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_3aae0b2c",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 97,
      "author": {
        "id": 50
      },
      "writtenOn": "2015-02-23T16:15:07Z",
      "side": 1,
      "message": "as above",
      "parentUuid": "6e7c4fa4_17a44a9d",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_f7774e34",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 124,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T12:46:41Z",
      "side": 1,
      "message": "If that\u0027s all we need the Language for, perhaps there should be a ListFormatter interface that we could use instead.",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_5a8427b4",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 124,
      "author": {
        "id": 50
      },
      "writtenOn": "2015-02-23T16:15:07Z",
      "side": 1,
      "message": "Yeah, that would be nice... splitting up the whole Language object mess would be awesoem",
      "parentUuid": "6e7c4fa4_f7774e34",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_a01f4a5d",
        "filename": "client/includes/DataAccess/EntityStatementsRenderer.php",
        "patchSetId": 5
      },
      "lineNbr": 124,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T18:05:46Z",
      "side": 1,
      "message": "We could just wrap it on our end for the moment. But not in this patch, I guess.",
      "parentUuid": "6e7c4fa4_5a8427b4",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_97affa77",
        "filename": "client/includes/scribunto/Scribunto_LuaWikibaseEntityLibrary.php",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T12:46:41Z",
      "side": 1,
      "message": "Perhaps use the \"setServices\" approach to make this nicer for testing",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_1aa1cf35",
        "filename": "client/includes/scribunto/Scribunto_LuaWikibaseEntityLibrary.php",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 50
      },
      "writtenOn": "2015-02-23T16:15:07Z",
      "side": 1,
      "message": "Could be done in a follow-up",
      "parentUuid": "6e7c4fa4_97affa77",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_8051ee12",
        "filename": "client/includes/scribunto/Scribunto_LuaWikibaseEntityLibrary.php",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T18:05:46Z",
      "side": 1,
      "message": "sure",
      "parentUuid": "6e7c4fa4_1aa1cf35",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_37c86659",
        "filename": "client/includes/scribunto/Scribunto_LuaWikibaseEntityLibrary.php",
        "patchSetId": 5
      },
      "lineNbr": 133,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T12:46:41Z",
      "side": 1,
      "message": "Why?! Shouldn\u0027t this trigger an error? Or at least \u003cspan class\u003d\"error\"\u003e?",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_ba50db37",
        "filename": "client/includes/scribunto/Scribunto_LuaWikibaseEntityLibrary.php",
        "patchSetId": 5
      },
      "lineNbr": 133,
      "author": {
        "id": 50
      },
      "writtenOn": "2015-02-23T16:15:07Z",
      "side": 1,
      "message": "Mh... that\u0027s a good question, actually...\n\nWhat we could do is either have the whole function (in Lua) return nil instead of a table or just smash an error in the user\u0027s face. Right now I\u0027m failing as graceful as possible, as I want this function very fool proof, but we can change that.\n\nBtw: \u0027\u0027 is true in Lua (unlike PHP)",
      "parentUuid": "6e7c4fa4_37c86659",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_c07286ab",
        "filename": "client/includes/scribunto/Scribunto_LuaWikibaseEntityLibrary.php",
        "patchSetId": 5
      },
      "lineNbr": 133,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T18:05:46Z",
      "side": 1,
      "message": "Filing silently isn\u0027t fool proof.\nI think an empty string is fine e.g. if there is no statement for the requested property. But if the entity isn\u0027t there, or the property doesn\u0027t even exist, then it\u0027s good to indicate this to the caller. Returning nil sounds good, or a formatted error string (if there\u0027s a convention for this in Scribunto modules). An exception may be too harsh in case an entity got deleted.",
      "parentUuid": "6e7c4fa4_ba50db37",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_d7e012ca",
        "filename": "client/includes/scribunto/mw.wikibase.entity.lua",
        "patchSetId": 5
      },
      "lineNbr": 132,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T12:46:41Z",
      "side": 1,
      "message": "IN a lot of cases we don\u0027t even need this...",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_daf11767",
        "filename": "client/includes/scribunto/mw.wikibase.entity.lua",
        "patchSetId": 5
      },
      "lineNbr": 132,
      "author": {
        "id": 50
      },
      "writtenOn": "2015-02-23T16:15:07Z",
      "side": 1,
      "message": "true... we could defer loading this using a stub metatable as well, I\u0027m just not sure that\u0027s worth it. Also it\u0027s unrelated here, could be followed-up",
      "parentUuid": "6e7c4fa4_d7e012ca",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e7c4fa4_80680eb9",
        "filename": "client/includes/scribunto/mw.wikibase.entity.lua",
        "patchSetId": 5
      },
      "lineNbr": 132,
      "author": {
        "id": 128
      },
      "writtenOn": "2015-02-23T18:05:46Z",
      "side": 1,
      "message": "yea, just made me wonder",
      "parentUuid": "6e7c4fa4_daf11767",
      "revId": "40df11cc678fb586fed362f7a4a58ec3c762b024",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}