{
  "comments": [
    {
      "key": {
        "uuid": "814a6aba_f6316fe9",
        "filename": "lib/tests/phpunit/Store/CachingFallbackLabelDescriptionLookupTest.php",
        "patchSetId": 5
      },
      "lineNbr": 175,
      "author": {
        "id": 106
      },
      "writtenOn": "2018-08-24T08:13:33Z",
      "side": 1,
      "message": "Why is this being done like this?\n$existingRevisionId is not used below this line so I am confused as to why you are setting it?",
      "range": {
        "startLine": 175,
        "startChar": 29,
        "endLine": 175,
        "endChar": 52
      },
      "revId": "42787dc4fff141282656fa495a2bbd49143e898a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db42561d_da03d554",
        "filename": "lib/tests/phpunit/Store/CachingFallbackLabelDescriptionLookupTest.php",
        "patchSetId": 5
      },
      "lineNbr": 175,
      "author": {
        "id": 2626
      },
      "writtenOn": "2018-08-24T09:44:35Z",
      "side": 1,
      "message": "I believe, it is to make it more clear without needing to dig into newRevisionLookup and the class which instance is constructed here what the number 1 is meant to stand for here.",
      "parentUuid": "814a6aba_f6316fe9",
      "range": {
        "startLine": 175,
        "startChar": 29,
        "endLine": 175,
        "endChar": 52
      },
      "revId": "42787dc4fff141282656fa495a2bbd49143e898a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2230ea49_01c87c21",
        "filename": "lib/tests/phpunit/Store/CachingFallbackLabelDescriptionLookupTest.php",
        "patchSetId": 5
      },
      "lineNbr": 175,
      "author": {
        "id": 106
      },
      "writtenOn": "2018-08-24T09:54:39Z",
      "side": 1,
      "message": "To me this just makes the code more confusing, we are making use of a language feature, but using it for something that it was not intended.\nAnyone that knows PHP knows about this language feature and what it does and then looks at this and says, why is it doing that? it doesn\u0027t need to.\n\nI wouldn\u0027t really call it a dig into newRevisionLookup either, that method is 5 lines long and its pretty clear what it does.\n\nIf we really want to hint here about what the parameter being passed into the function is for then let\u0027s use a less confusing phpdoc comment instead of assigning a variable?\nBut I still don\u0027t really see the need of this hint, are we going to start doing this everywhere?\nCan we just look at the function definition that we are calling instead?",
      "parentUuid": "db42561d_da03d554",
      "range": {
        "startLine": 175,
        "startChar": 29,
        "endLine": 175,
        "endChar": 52
      },
      "revId": "42787dc4fff141282656fa495a2bbd49143e898a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e84d6ceb_c738e202",
        "filename": "lib/tests/phpunit/Store/CachingFallbackLabelDescriptionLookupTest.php",
        "patchSetId": 5
      },
      "lineNbr": 175,
      "author": {
        "id": 4089
      },
      "writtenOn": "2018-08-27T08:31:55Z",
      "side": 1,
      "message": "\u003e ... we are making use of a language feature, but using it for something that it was not intended.\n\nThe feature you referring to is that assignment operation is an expression in PHP. And it is intended to be used like this and every PHP programmer who ever queried MySQL from PHP used it many times: \n`while ($row \u003d mysql_fetch_assoc($result)) { ...` (copied from PHP manual). Although, in this concrete case the variable is unused.\n\n\u003e Anyone that knows PHP knows about this language feature and what it does and then looks at this and says, why is it doing that? it doesn\u0027t need to.\n\nI wonder what do you mean saying \"It doesn\u0027t need to\". The main quality of a test code IMO (except it\u0027s correctness) is readability, so if the code becomes more verbose but more clear I\u0027m totally for that.\nAn extreme example, but still: you don\u0027t need to assign values to variables if you use it in one place only (but I think you still do). So, it also looks like \"It doesn\u0027t need to\".\n\n\u003e I wouldn\u0027t really call it a dig into newRevisionLookup either, that method is 5 lines long and its pretty clear what it does. \n\nSure it is short, but reader have to jump between the methods. And if you are looking at the patch in Gerrit web interface method might out of the scope of the patch, so you need to expand all the code, find the method, understand it and then remember where you were and come back there. And what if there are 2 or 3 methods like this? I would find it supper annoying during, especially during the code review (rate of WTF/min will go above the threshold :) ).\n\n\u003e But I still don\u0027t really see the need of this hint ...\n\nIf I remove this, the code will look like: `$this-\u003enewRevisionLookup( 1 )`. The first question the reader will have is \"What does `1` mean? Create one RevisionLookup, or RevisionLookup with one revision or ...?\" That is why I see value in this.\n\n\u003e  ...let\u0027s use a less confusing phpdoc comment instead...\n\nCan be done, but it doesn\u0027t make it really prettier: `$this-\u003enewRevisionLookup( /* existingRevisionId */ 1 )`. Can\u0027t see how it is better. Also, some tests might use this value for assertions, and then in some tests it will be done with comments in other with variable. It\u0027s not a big problem for me, but just why do that?\n\n\u003e ...are we going to start doing this everywhere?\n\nI don\u0027t think we should do anything everywhere. I would say: we can do it where it makes sense. If you can achieve readability using other means, I don\u0027t mind.\n\nPS: Looks like we should discuss meaning of `-1` again. :) Next time, please. if this kind of concern is the only one blocking you from merging my patch, just fix it and merge.",
      "parentUuid": "2230ea49_01c87c21",
      "range": {
        "startLine": 175,
        "startChar": 29,
        "endLine": 175,
        "endChar": 52
      },
      "revId": "42787dc4fff141282656fa495a2bbd49143e898a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "de256a13_400def68",
        "filename": "lib/tests/phpunit/Store/CachingFallbackLabelDescriptionLookupTest.php",
        "patchSetId": 5
      },
      "lineNbr": 175,
      "author": {
        "id": 106
      },
      "writtenOn": "2018-08-27T09:04:53Z",
      "side": 1,
      "message": "\u003e `while ($row \u003d mysql_fetch_assoc($result)) { ...`\nThings like this are discouraged in our / the mediawiki code style (i\u0027m not actually sure if it is in the codesniffer anywhere).\n\nThe expected way to actually write the code for this method per the code style would be the following (if we actually had to set $existingRevisionId):\n\n$existingRevisionId \u003d 1;\n$lookup \u003d new CachingFallbackLabelDescriptionLookup(\n\t\t\t$this-\u003ecache-\u003ereveal(),\n\t\t\t$this-\u003enewRevisionLookup( $existingRevisionId ),\n\t\t\t$ldLookup-\u003ereveal(),\n\t\t\t$this-\u003enewFallbackChain(),\n\t\t\t$ttlInSeconds\n\t\t);\n\n\u003e you don\u0027t need to assign values to variables if you use it in one place only (but I think you still do).\nI\u0027m fine with assigning variables and using them in one place (see the example pasted above).\n\n\u003e And if you are looking at the patch in Gerrit web interface method might out of the scope of the patch, so you need to expand all the code, find the method, understand it and then remember where you were and come back there.\nIf I were looking at this code in gerrit, I wouldn\u0027t assume that $existingRevisionId has any relation to the parameter name within the function that I am calling.\n\n\u003e Can be done, but it doesn\u0027t make it really prettier: `$this-\u003enewRevisionLookup( /* existingRevisionId */ 1 )`\n\nIf I read this then I would expect exactly what you are trying to imply by assigning the variable in the call.\nWe don\u0027t want it to be pretty necessarily, we want it to be easy to understand.\n\n\u003e I don\u0027t think we should do anything everywhere. I would say: we can do it where it makes sense. If you can achieve readability using other means, I don\u0027t mind.\nThere could be some places that it makes sense to hint about the parmeter name of the function we are calling, perhaps this is not the place though with the method we are calling in the same class only 100 lines below.\n\n\u003e PS: Looks like we should discuss meaning of `-1` again. :) Next time, please. if this kind of concern is the only one blocking you from merging my patch, just fix it and merge.\n-1 \u003d \"There\u0027s a problem with this change, please improve\". Of course the change needed can be my opinion.\nWhen I first looked at this patch I literally had no idea what the intention of the assignment in the call was for, i couldn\u0027t \"just fix it\", as I didn\u0027t know the intention of that bit of code in the first place. Was it an accident? Was it intended?\nWe have had a pretty swift discussion on this patch over 3 days (2 of which were the weekend anyway), I now understand what the patch / line was doing \u0026 why and I hope you now understand my concerns. Having this discussion is probably better than just sweeping it under the rug and waiting for it to come up again later down the line.\n\nSo, on that note I\u0027m happy to remove this one bit and merge this straight away.\nIf we want to start doing param name hinting in our method calls we should perhaps schedule a 15 min call within the teams / have an email thread to discuss how exactly we want to do it, as clearly already my opinion differs from yours and I imagine the rest of the teams opinions would be spread across our 2 ideas \u0026 perhaps more.",
      "parentUuid": "e84d6ceb_c738e202",
      "range": {
        "startLine": 175,
        "startChar": 29,
        "endLine": 175,
        "endChar": 52
      },
      "revId": "42787dc4fff141282656fa495a2bbd49143e898a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}