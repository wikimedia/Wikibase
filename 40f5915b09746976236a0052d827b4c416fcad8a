{
  "comments": [
    {
      "key": {
        "uuid": "ee14bf34_d4bd1165",
        "filename": "repo/Wikibase.hooks.php",
        "patchSetId": 4
      },
      "lineNbr": 1165,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-20T12:32:40Z",
      "side": 1,
      "message": "So, we now again put labels for all languages in the parser cache for all languages? Why? That\u0027s a lot of useless data...",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_340a0d2a",
        "filename": "repo/Wikibase.hooks.php",
        "patchSetId": 4
      },
      "lineNbr": 1165,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-20T13:37:29Z",
      "side": 1,
      "message": "EntityView::getParserOutput uses serialization options from EntityContent (ick, yes)\n\nthere, we have:\n\n    protected function makeSerializationOptions( $langCode, LanguageFallbackChain $fallbackChain ) { \n        $langCodes \u003d Utils::getLanguageCodes() + array( $langCode \u003d\u003e $fallbackChain );                 \n                                                                                                       \n        $options \u003d new SerializationOptions();                                                         \n        $options-\u003esetLanguages( $langCodes );                                                          \n                                                                                                       \n        return $options;                                                                               \n    } \n\nimportant to be consistent. this is how it\u0027s been done, even before these were cached.  I am concerned about causing an issue in the frontend by changing there here and now.\n\nare you sure that the JS does not use these other languages in any way? I am definitely *not* sure about that.\n\nare you also sure that none of the gadgets use those other languages?  I am definitely **not** sure.",
      "parentUuid": "ee14bf34_d4bd1165",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_b70cd63e",
        "filename": "repo/Wikibase.hooks.php",
        "patchSetId": 4
      },
      "lineNbr": 1165,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-21T09:13:54Z",
      "side": 1,
      "message": "I was under the impression that we currently didn\u0027t put all languages into the JS vars. Am I confused?\n\nWhat exactly are these languages used for here? The \"main\" entity on the page, or the referenced entities, or both? I think it\u0027s safe to not have all languages for the references entities (that would be a lot of data, potentially). For the \"main\" entity shown on the page, we perhaps should have all languages, for easy access by gadgets, etc. But then we should definitely avoid saving the full serialized for every language version of the page. It would need its own, separate cache key (in the parser cache or object cache).\n\nI\u0027m fine with leaving this for now, if we have tickets for a) not including all languages for referenced entities (if  that isn\u0027t already the case) and b) storing the full serialized entity separately (actually, EntityLookup already does caching... maybe that would actually be sufficient). Please check whether we do.",
      "parentUuid": "ee14bf34_340a0d2a",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_b7c5f692",
        "filename": "repo/Wikibase.hooks.php",
        "patchSetId": 4
      },
      "lineNbr": 1165,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-21T09:47:02Z",
      "side": 1,
      "message": "we include all languages for wbEntity\n\nwe include just the one language code for wbUsedEntities, with bit ugly TODO to support language fallback.  When we do, we\u0027ll need to bump cache epoch again.",
      "parentUuid": "ee14bf34_b70cd63e",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_54a90120",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 53,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-20T12:32:40Z",
      "side": 1,
      "message": "Oh, please don\u0027t use EntityContentFactory any more. Use an EntityLookup or EntityRevisionLookup  instead.",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_7462c507",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 53,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-20T13:37:29Z",
      "side": 1,
      "message": "can do in follow up",
      "parentUuid": "ee14bf34_54a90120",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_2c175958",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 53,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-21T09:13:54Z",
      "side": 1,
      "message": "Please submit the follow-up before we merge this. EntityContent and EntityContentFactory have since been largely removed from the codebase, so this is a regression, kind of.",
      "parentUuid": "ee14bf34_7462c507",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_173ee287",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 53,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-21T09:47:02Z",
      "side": 1,
      "message": "what, it\u0027s already been remove from here in master?  not that I can see.\n\nplease make a bug ticket and have lydia put in the sprint.  but please don\u0027t block this patch.",
      "parentUuid": "ee14bf34_2c175958",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_94b79981",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 109,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-20T12:32:40Z",
      "side": 1,
      "message": "Why?! This is not PHP4!",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_b76a9faf",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 109,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-20T13:37:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ee14bf34_94b79981",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_5478e1be",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-20T12:32:40Z",
      "side": 1,
      "message": "If all we need is the config vars, this method just only ask for the configVars, not OutputPage.",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_d7751394",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-20T13:37:29Z",
      "side": 1,
      "message": "was able to get rid of the method completely",
      "parentUuid": "ee14bf34_5478e1be",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_74ac0533",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 149,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-20T12:32:40Z",
      "side": 1,
      "message": "Use an EntityLookup or EntityRevisionLookup to get an Entity instead.",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_1459495d",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 149,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-20T13:37:29Z",
      "side": 1,
      "message": "do in follow up, didn\u0027t touch this here.  did change so that we pass revision id as a param",
      "parentUuid": "ee14bf34_74ac0533",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_f467f520",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 166,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-20T12:32:40Z",
      "side": 1,
      "message": "Use an Entity or EntityRevision instead of EntityContent",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_f435b5f4",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 166,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-20T13:37:29Z",
      "side": 1,
      "message": "in follow up",
      "parentUuid": "ee14bf34_f467f520",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_747be5bd",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 168,
      "author": {
        "id": 128
      },
      "writtenOn": "2014-03-20T12:32:40Z",
      "side": 1,
      "message": "If all we need here is the language code, the method should ask for just the language code.",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee14bf34_976f9bc0",
        "filename": "repo/includes/Hook/OutputPageJsConfigHookHandler.php",
        "patchSetId": 4
      },
      "lineNbr": 168,
      "author": {
        "id": 33
      },
      "writtenOn": "2014-03-20T13:37:29Z",
      "side": 1,
      "message": "actually, this is unused.  removed it.",
      "parentUuid": "ee14bf34_747be5bd",
      "revId": "40f5915b09746976236a0052d827b4c416fcad8a",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}